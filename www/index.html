<!DOCTYPE html>
<html>

    <style>
        html, body{
            margin: 0;
            padding: 0;
            min-width: 1024px;
            max-width: 100%;
        }
        .head{
            height: 55px;
            padding: 5px 5px 5px 5px;
            background-color: whitesmoke;
            border-top: solid black 1px;
        }
        .logo{
            margin-left: 50px;
            font-family: monospace;
        }
        .footer{
            padding: 5px;
            min-width: 1024px;
            max-width: 100%;
            text-align: center;
        }
        .footer-content{
            margin-left: 50px;
        }
        .container{
        }
        table{
            margin: 0px auto;
            margin-top: 30px;
            width: 1024px;
        }
        .area{
            border: 1px solid black;
        }
        .item{
            border: 1px solid black;
            padding: 0px;
            font-size: 20px;
            height: 40px;
            width: 50%;
            margin: 0 auto;
        }
    </style>

    <div class="head">
        <h2 class="logo">Dychitan Electronics Corporation</h2>
    </div>
    <div class="container">
        <table>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL1</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL13</em>
                    </element>
                </td>
            </tr>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL2</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL14</em>
                    </element>
                </td>
            </tr>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL3</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL15</em>
                    </element>
                </td>
            </tr>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL4</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL16</em>
                    </element>
                </td>
            </tr>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL5</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL17</em>
                    </element>
                </td>
            </tr>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL6</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL18</em>
                    </element>
                </td>
            </tr>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL7</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL19</em>
                    </element>
                </td>
            </tr>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL8</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL20</em>
                    </element>
                </td>
            </tr>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL9</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL21</em>
                    </element>
                </td>
            </tr>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL10</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL22</em>
                    </element>
                </td>
            </tr>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL11</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL23</em>
                    </element>
                </td>
            </tr>
            <tr class="area">
                <td class="item">
                    <element>
                        <em>PL12</em>
                    </element>
                </td>
                <td class="item">
                    <element>
                        <em>PL24</em>
                    </element>
                </td>
            </tr>
        </table>
    </div>
    <div class="footer">
        <p class="footer-content"><em>Server Time:</em> <element id="servertime">Offline</element> | <em>Total Client RTU:</em><element id="rtucount">0</element></p>
    </div>

    <script type="text/javascript">
        var db_mac = []
        setInterval(function(){
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    var db_mac = eval(xmlhttp.responseText);
                    var counter = 0;
                    for(var i=0; i<db_mac.length; i++){
                        if(db_mac!="[]" && db_mac!=""){
                            counter+=1;
                        }
                    }
                    if(counter){
                        document.getElementById("rtucount").textContent = counter
                    }else{
                        document.getElementById("rtucount").textContent = "Offline"
                    }
                    console.log(counter)
                    
                    // RTU Data Parsing
                    if (window.XMLHttpRequest)
                    {// code for IE7+, Firefox, Chrome, Opera, Safari
                        xmlhttp=new XMLHttpRequest();
                    }
                    else
                    {// code for IE6, IE5
                        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    xmlhttp.onreadystatechange=function()
                    {
                        if (xmlhttp.readyState==4 && xmlhttp.status==200)
                        {
                            // RTU DATA
                            var last_reports = eval(xmlhttp.responseText);
                            for(var i=0; i<last_reports.length; i++){
                                var server_t = last_reports[i].split(',')[2]
                                if(last_reports.length){
                                    document.getElementById("servertime").textContent = server_t
                                }else{
                                    document.getElementById("servertime").textContent = "Offline"
                                }
                            }
                        }
                    }
                    xmlhttp.open("GET", window.location.href+"last_reports", true );
                    xmlhttp.send();
                    // End RTU Data Parsing
                }
            }
            xmlhttp.open("GET", window.location.href+"active_mac", true );
            xmlhttp.send();
        }, 500);
    </script>
</html>